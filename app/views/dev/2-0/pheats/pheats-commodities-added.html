{% extends "layout.html" %}

{% block pageTitle %}
  [title] - Manage account - {{serviceName}} - GOV.UK
{% endblock %}

{% block beforeContent %}
{{super()}}
<div class="login-nav login-border">
  <ul class="login-nav__list">
    <li class="login-nav__list-item-new">Prototype user</li>
    <li class="login-nav__list-item-new"><a href="../account" class="govuk-link login-nav__link-new govuk-link--no-visited-state profile">Manage account</a></li>
    <li class="login-nav__list-item-new"><a href="#" class="govuk-link login-nav__link-new govuk-link--no-visited-state">Sign out</a></li>
  </ul>
</div>

<a href="javascript:history.back()" class="govuk-back-link">Back</a>
{% endblock %}

{% block content %}
<div class="govuk-grid-row">
  
  <div class="govuk-grid-column-two-thirds">

    <!-- <h1 class="govuk-heading-xl">Are you applying to PHEATS? {{data.dave}}</h1> -->

    {% if data.deleted != "false" %}
    <div class="govuk-notification-banner govuk-notification-banner--success" role="alert" aria-labelledby="govuk-notification-banner-title" data-module="govuk-notification-banner">
        <div class="govuk-notification-banner__header">
            <h2 class="govuk-notification-banner__title" id="govuk-notification-banner-title">
            Success
            </h2>
        </div>
        <div class="govuk-notification-banner__content">
            <h3 class="govuk-notification-banner__heading">
              Commodity deleted
            </h3>
            <p class="govuk-body">{{data.deleted}} has been deleted.</p>
        </div>
    </div>
    {% endif %}

    <h1 class="govuk-heading-xl">
      PHEATS commodities
    </h1>

    <p class="govuk-body">Here are all the commodities that could be exported through PHEATS.</p>

    <!-- <h2 class="govuk-heading-l">
      [authorised people added]
    </h2> -->

    {% set _commodityCount = data['commodityCount'] or 1 | int %}
    {% set _commodityCountDeleted = _commodityCount|int - 1 %}
    {% set _commodityCountNext = _commodityCount|int + 1 %}

    <dl class="govuk-summary-list govuk-!-margin-bottom-9">

      {% for i in range(0, _commodityCount) -%}

      {% set _commodityName = data['botanical_name'] or 'Dactylorhiza umbrosa (DAKUM)' %}

        <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{_commodityName}}<br>

              {% set _commodityVariety = 'commodityVariety' + loop.index %}
              <span style="font-weight:normal">{{data[_commodityVariety]}}</span>
            </dt>
            <dd class="govuk-summary-list__value">
                <p class="govuk-body">
                  Origin: <br>{{data['countryOfOriginSelect'] or 'France'}}<br><br>

                  Destination: <br>{{data['countryOfExportSelect'] or 'Northern Ireland'}}
                </p>
            </dd>
            <dd class="govuk-summary-list__actions">
              <a class="govuk-link govuk-link--no-visited-state" href="#">
                Edit<span class="govuk-visually-hidden"> </span>
              </a>
            </dd>
            {% set _deleteLink = "pheats-commodities-added?deleted=" + _commodityName + "&commodityCount=" + _commodityCountDeleted | int %}
            {% if _commodityCount | int == 1 %}
            {% set _deleteLink = "pheats-commodity?deleted=" + _commodityName + "&commodityCount=" + _commodityCount | int %}
            {% endif %}
            <dd class="govuk-summary-list__actions">
              <a class="govuk-link govuk-link--no-visited-state" href="{{_deleteLink}}">
                  Delete<span class="govuk-visually-hidden"> </span>
              </a>
            </dd>
        </div>
      {%- endfor %}

    </dl>


    

    <form method="post" novalidate>
      <div class="govuk-form-group ">
        <fieldset class="govuk-fieldset">
          <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">
            Add another commodity?
          </legend>

          <!-- <p class="govuk-body">It may take several months for a new authorised person to get approved to do inspections.</p> -->
          
          <div class="govuk-radios" data-module="govuk-radios">
            <div class="govuk-radios__item">
              <input class="govuk-radios__input" id="pheatsAddCommodity-1" name="pheatsAddCommodity" type="radio" value="Yes~pheats-commodity?commodityCount={{_commodityCountNext | int}}">
              <label class="govuk-label govuk-radios__label" for="pheatsAddCommodity-1">
                Yes
              </label>
            </div>
            <div class="govuk-radios__item">
              <input class="govuk-radios__input" id="pheatsAddCommodity-2" name="pheatsAddCommodity" type="radio" value="No~pheats-pr">
              <label class="govuk-label govuk-radios__label" for="pheatsAddCommodity-2">
                No
              </label>
            </div>

          </div>
        </fieldset>
      </div>

      <button class="govuk-button" data-module="govuk-button">
        Continue
      </button>

      {% set _pheatsReturnURL = 'pheats-commodities-added' %}
      <p class="govuk-body govuk-!-margin-top-2"><a href="pheats-cancel?pheatsReturnURL={{_pheatsReturnURL}}" class="govuk-link govuk-link--no-visited-state">Cancel PHEATS application</a></p>

    </form>

  </div>
</div>
{% endblock %}
