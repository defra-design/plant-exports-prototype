{% extends "layout.html" %}

{% block pageTitle %}
  Error: There is a problem - Phytosanitary certificate - {{serviceName}} - GOV.UK
{% endblock %}

{% block beforeContent %}
{{super()}}
{% include "../modules/_account-banner.html" %}
<a href="javascript:history.back()" class="govuk-back-link">Back</a>
{% endblock %}

{% block content %}
<div class="govuk-grid-row">

  <div class="govuk-grid-column-two-thirds">

    {% if query.details == "full" %}
    <div class="govuk-error-summary" aria-labelledby="error-summary-title" role="alert" tabindex="-1" data-module="govuk-error-summary">
      <h2 class="govuk-error-summary__title" id="error-summary-title">There is a problem</h2>
      <h3 class="govuk-heading-s">There are 202 errors in your file</h3>

      <div class="govuk-error-summary__body">
        <ul class="govuk-list govuk-error-summary__list">
          <li><a href="#fileUpload1">Correct the problems with your file and then upload the file again</a></li>
        </ul>
        <ul class="govuk-list govuk-list--bullet">
          <li>Row 3: Commodity type is missing</li>
          <li>Row 4: Commodity type is missing</li>
          <li>Row 5: Commodity type is missing</li>
          <li>Row 6: Commodity type is missing</li>
          <li>Row 7: Commodity type is missing</li>
          <li>Row 8: Commodity type is missing</li>
          <li>Row 8: Quantity is too long. It should be 8 characters or fewer, up to 3 decimal places</li>
          <li>Row 9: Botanical name or description is missing</li>
          <li>Row 9: Commodity type is missing</li>
          <li>Row 10: Commodity type is missing</li>
          <li>Row 11: Commodity type is missing</li>
          <li>Row 12: Commodity type is missing</li>
          <li>Row 13: Commodity type is missing</li>
          <li>Row 14: Commodity type is missing</li>
          <li>Row 15: Commodity type is missing</li>
          <li>Row 16: Commodity type is missing</li>
          <li>Row 17: Commodity type is missing</li>
          <li>Row 18: Commodity type is missing</li>
          <li>Row 19: Commodity type is missing</li>
          <li>Row 20: Commodity type is missing</li>
          <li>Row 21: Commodity type is missing</li>
          <li>Row 22: Commodity type is missing</li>
          <li>Row 23: Commodity type is missing</li>
          <li>Row 23: Quantity is missing</li>
          <li>Row 24: Commodity type is missing</li>
          <li>Row 24: Quantity is missing</li>
          <li>Row 25: Commodity type is missing</li>
          <li>Row 25: Quantity is missing</li>
          <li>Row 26: Commodity type is missing</li>
          <li>Row 26: Quantity is too long. It should be 8 characters or fewer, up to 3 decimal places</li>
          <li>Row 27: Commodity type is missing</li>
          <li>Row 27: Quantity is missing</li>
          <li>Row 28: Commodity type is missing</li>
          <li>Row 28: Quantity is too long. It should be 8 characters or fewer, up to 3 decimal places</li>
          <li>Row 28: Number of packages is missing</li>
          <li>Row 29: Commodity type is missing</li>
          <li>Row 30: Commodity type is missing</li>
          <li>Row 31: Commodity type is missing</li>
          <li>Row 32: Commodity type is missing</li>
          <li>Row 33: Commodity type is missing</li>
          <li>Row 34: Commodity type is missing</li>
          <li>Row 34: Quantity is missing</li>
          <li>Row 35: Commodity type is missing</li>
          <li>Row 35: Quantity is missing</li>
          <li>Row 36: Commodity type is missing</li>
          <li>Row 36: Country of origin is missing</li>
          <li>Row 36: Packaging type is missing</li>
          <li>Row 37: Commodity type is missing</li>
          <li>Row 37: Country of origin is missing</li>
          <li>Row 38: Commodity type is missing</li>
          <li>Row 38: Country of origin is missing</li>
          <li>Row 39: Commodity type is missing</li>
          <li>Row 39: Country of origin is missing</li>
          <li>Row 40: Commodity type is missing</li>
          <li>Row 40: Country of origin is missing</li>
          <li>Row 41: Commodity type is missing</li>
          <li>Row 41: Country of origin is missing</li>
          <li>Row 42: Commodity type is missing</li>
          <li>Row 42: Country of origin is missing</li>
          <li>Row 42: Quantity does not match the expected type of Number</li>
          <li>Row 43: Commodity type is missing</li>
          <li>Row 43: Country of origin is missing</li>
          <li>Row 44: Commodity type is missing</li>
          <li>Row 44: Country of origin is missing</li>
          <li>Row 45: Commodity type is missing</li>
          <li>Row 45: Country of origin is missing</li>
          <li>Row 46: Commodity type is missing</li>
          <li>Row 46: Country of origin is missing</li>
          <li>Row 47: Commodity type is missing</li>
          <li>Row 47: Country of origin is missing</li>
          <li>Row 47: Quantity is missing</li>
          <li>Row 48: Commodity type is missing</li>
          <li>Row 48: Country of origin is missing</li>
          <li>Row 48: Quantity is missing</li>
          <li>Row 49: Commodity type is missing</li>
          <li>Row 49: Country of origin is missing</li>
          <li>Row 49: Quantity is missing</li>
          <li>Row 50: Commodity type is missing</li>
          <li>Row 50: Country of origin is missing</li>
          <li>Row 50: Quantity is missing</li>
          <li>Row 51: Commodity type is missing</li>
          <li>Row 51: Country of origin is missing</li>
          <li>Row 52: Commodity type is missing</li>
          <li>Row 52: Country of origin is missing</li>
          <li>Row 52: Packaging type is missing</li>
          <li>Row 53: Commodity type is missing</li>
          <li>Row 53: Country of origin is missing</li>
          <li>Row 54: Commodity type is missing</li>
          <li>Row 54: Country of origin is missing</li>
          <li>Row 54: Quantity is missing</li>
          <li>Row 55: Commodity type is missing</li>
          <li>Row 55: Country of origin is missing</li>
          <li>Row 56: Commodity type is missing</li>
          <li>Row 56: Country of origin is missing</li>
          <li>Row 56: Quantity is missing</li>
          <li>Row 57: Commodity type is missing</li>
          <li>Row 57: Country of origin is missing</li>
          <li>Row 57: Quantity is too long. It should be 8 characters or fewer, up to 3 decimal places</li>
          <li>Row 58: Commodity type is missing</li>
          <li>Row 58: Country of origin is missing</li>
          <li>Row 58: Quantity is too long. It should be 8 characters or fewer, up to 3 decimal places</li>
          <li>Row 59: Commodity type is missing</li>
          <li>Row 59: Country of origin is missing</li>
          <li>Row 59: Quantity is too long. It should be 8 characters or fewer, up to 3 decimal places</li>
          <li>Row 60: Commodity type is missing</li>
          <li>Row 60: Country of origin is missing</li>
          <li>Row 60: Quantity is too long. It should be 8 characters or fewer, up to 3 decimal places</li>
          <li>Row 61: Commodity type is missing</li>
          <li>Row 61: Country of origin is missing</li>
          <li>Row 61: Quantity is missing</li>
          <li>Row 62: Commodity type is missing</li>
          <li>Row 62: Country of origin is missing</li>
          <li>Row 63: Commodity type is missing</li>
          <li>Row 63: Country of origin is missing</li>
          <li>Row 64: Commodity type is missing</li>
          <li>Row 64: Country of origin is missing</li>
          <li>Row 65: Commodity type is missing</li>
          <li>Row 65: Country of origin is missing</li>
          <li>Row 66: Commodity type is missing</li>
          <li>Row 66: Country of origin is missing</li>
          <li>Row 66: Quantity is missing</li>
          <li>Row 67: Commodity type is missing</li>
          <li>Row 67: Country of origin is missing</li>
          <li>Row 67: Quantity is missing</li>
          <li>Row 68: Commodity type is missing</li>
          <li>Row 68: Country of origin is missing</li>
          <li>Row 69: Commodity type is missing</li>
          <li>Row 69: Quantity is missing</li>
          <li>Row 70: Commodity type is missing</li>
          <li>Row 70: Country of origin is missing</li>
          <li>Row 70: Quantity is missing</li>
          <li>Row 71: Commodity type is missing</li>
          <li>Row 71: Country of origin is missing</li>
          <li>Row 71: Quantity is too long. It should be 8 characters or fewer, up to 3 decimal places</li>
          <li>Row 72: Commodity type is missing</li>
          <li>Row 72: Country of origin is missing</li>
          <li>Row 72: Quantity is missing</li>
          <li>Row 73: Commodity type is missing</li>
          <li>Row 73: Country of origin is missing</li>
          <li>Row 73: Quantity is missing</li>
          <li>Row 74: Commodity type is missing</li>
          <li>Row 74: Country of origin is missing</li>
          <li>Row 75: Commodity type is missing</li>
          <li>Row 75: Country of origin is missing</li>
          <li>Row 76: Commodity type is missing</li>
          <li>Row 76: Country of origin is missing</li>
          <li>Row 77: Commodity type is missing</li>
          <li>Row 77: Quantity is too long. It should be 8 characters or fewer, up to 3 decimal places</li>
          <li>Row 78: Commodity type is missing</li>
          <li>Row 78: Country of origin is missing</li>
          <li>Row 78: Quantity is missing</li>
          <li>Row 79: Commodity type is missing</li>
          <li>Row 79: Country of origin is missing</li>
          <li>Row 80: Commodity type is missing</li>
          <li>Row 80: Country of origin is missing</li>
          <li>Row 81: Commodity type is missing</li>
          <li>Row 81: Country of origin is missing</li>
          <li>Row 82: Commodity type is missing</li>
          <li>Row 82: Country of origin is missing</li>
          <li>Row 83: Commodity type is missing</li>
          <li>Row 83: Country of origin is missing</li>
          <li>Row 84: Commodity type is missing</li>
          <li>Row 84: Country of origin is missing</li>
          <li>Row 85: Commodity type is missing</li>
          <li>Row 85: Country of origin is missing</li>
          <li>Row 85: Packaging type is missing</li>
          <li>Row 86: Commodity type is missing</li>
          <li>Row 86: Country of origin is missing</li>
          <li>Row 86: Quantity is too long. It should be 8 characters or fewer, up to 3 decimal places</li>
          <li>Row 86: Packaging type is missing</li>
          <li>Row 87: Commodity type is missing</li>
          <li>Row 87: Packaging type is missing</li>
          <li>Row 88: Commodity type is missing</li>
          <li>Row 88: Country of origin is missing</li>
          <li>Row 88: Packaging type is missing</li>
          <li>Row 89: Commodity type is missing</li>
          <li>Row 89: Country of origin is missing</li>
          <li>Row 90: Commodity type is missing</li>
          <li>Row 90: Country of origin is missing</li>
          <li>Row 91: Commodity type is missing</li>
          <li>Row 91: Country of origin is missing</li>
          <li>Row 92: Commodity type is missing</li>
          <li>Row 92: Country of origin is missing</li>
          <li>Row 93: Commodity type is missing</li>
          <li>Row 93: Country of origin is missing</li>
          <li>Row 94: Commodity type is missing</li>
          <li>Row 94: Country of origin is missing</li>
          <li>Row 94: Packaging type is missing</li>
          <li>Row 95: Commodity type is missing</li>
          <li>Row 95: Country of origin is missing</li>
          <li>Row 96: Commodity type is missing</li>
          <li>Row 96: Country of origin is missing</li>
          <li>Row 96: Quantity is too long. It should be 8 characters or fewer, up to 3 decimal places</li>
          <li>Row 97: Commodity type is missing</li>
          <li>Row 98: Commodity type is missing</li>
          <li>Row 99: Commodity type is missing</li>
          <li>Row 99: Quantity is too long. It should be 8 characters or fewer, up to 3 decimal places</li>
          <li>Row 100: Commodity type is missing</li>
          <li>Row 101: Commodity type is missing</li>
          <li>Row 101: Country of origin is missing</li>
          <li>Row 102: Commodity type is missing</li>
          <li>Row 102: Country of origin is missing</li>
        </ul>
        <p class="govuk-body govuk-!-margin-bottom-0"><a href="upload-error-summary-hybrid" class="govuk-link">View grouped error summary</a></p>
      </div>

    </div>
    {% else %}
    <div class="govuk-error-summary" aria-labelledby="error-summary-title" role="alert" tabindex="-1" data-module="govuk-error-summary">
      <h2 class="govuk-error-summary__title" id="error-summary-title">There is a problem</h2>
      <h3 class="govuk-heading-s">There are 203 errors in your file</h3>

      <div class="govuk-error-summary__body">
        <ul class="govuk-list govuk-error-summary__list">
          <li><a href="#fileUpload1">Correct the problems with your file and then upload the file again</a></li>
        </ul>
        <ul class="govuk-list govuk-list--bullet">
          <!-- <li>Botanical name or description is missing (row 9)</li>
          <li>Commodity type is missing (100 rows)</li>
          <li>Country of origin is missing (60 rows)</li>
          <li>Quantity is missing (20 rows)</li>
          <li>Quantity does not match the expected type of Number (row 1)</li>
          <li>Quantity is too long. It should be 8 characters or fewer, up to 3 decimal places (12 rows)</li>
          <li>Number of packages is missing (row 28)</li>
          <li>Packaging type is missing (7 rows)</li> -->
          <li>You must enter information in the column called botanical name or description (row 9)</li>
          <li>You must enter information in the column called commodity type (100 rows)</li>
          <li>You must enter information in the column called country code for country of origin (60 rows)</li>
          <li>You must enter information in the column called quantity (20 rows)</li>
          <li>The information in the column called quantity is not what is needed. Try checking the guidance notes. (row 1)</li>
          <li>The information in the column called quantity is too long. It should be 100 characters or fewer. (12 rows)</li>
          <li>You must enter information in the column called number of packages (row 28)</li>
          <li>You must enter information in the column called packaging type (7 rows)</li>
          <li>The information in the column called EPPO code is not the right kind of information (row 14)</li>
        </ul>
        <p class="govuk-body govuk-!-margin-bottom-0"><a href="upload-error-summary-hybrid?details=full" class="govuk-link">View detailed error summary</a></p>
      </div>

    </div>
    {% endif %}

    <!-- Chris Harding (10.01.23) - Added this different scenario for usability testing of the HPUI 'Clone' designs -->
    {% if data.id == "34" %}
    <form action="upload-in-progress{% if query.change == 'yes' %}?change=yes&return_url={{data.return_url or 'check-your-answers'}}{% endif %}&has_botanicial_name2=use_description&commodity_description2=Rosa davidii (ROSDA)&commodity_type2=plants&countryOfOriginSelect2=GB&quantity2=10&units2=Tonnes&number_of_packages2=5&packaging2=BG&row2=true&has_botanicial_name3=use_description&commodity_description3=Anisodontea scabrosa (AODSC)&commodity_type3=plants&countryOfOriginSelect3=GB&quantity3=10&units3=Tonnes&number_of_packages3=5&packaging3=BG&row3=true&has_botanicial_name4=use_description&commodity_description4=Corylus ferox (CYLFE)&commodity_type4=plants&countryOfOriginSelect4=GB&quantity4=10&units4=Tonnes&number_of_packages4=5&packaging4=BG&row4=true&has_botanicial_name5=use_description&commodity_description5=Pinus ponderosa (PIUPO)&commodity_type5=plants&countryOfOriginSelect5=GB&quantity5=10&units5=Tonnes&number_of_packages5=5&packaging5=BG&row5=true" method="post" novalidate>
    {% else %}
    <form action="upload-in-progress{% if query.change == 'yes' %}?change=yes&return_url={{data.return_url or 'check-your-answers'}}{% endif %}" method="post" novalidate>
    {% endif %}
    
      <!--
        Chris Harding (06.06.22) - Here we set:
          a) template
          b) example template
        This is based on the commodity and application type provided.
      -->

      <!-- Default commodity value (e.g. if no commodity and application type exists) -->
      {% set commodity = data.commodity or "plants" %}

      <!-- Tailored values for template and example template based on based on commodity and application type -->
      {% if data.commodity == "bulbs" %}
        {% set template = "template-bulbs.csv" %}
        {% set exampleTemplate = "example-bulbs.csv" %}
      {% elif data.commodity == "plants" %}
        {% set template = "template-plants.csv" %}
        {% set exampleTemplate = "example-plant.csv" %}
      {% elif data.commodity == "potatoes" %}
        {% set template = "template-potatoes.csv" %}
        {% set exampleTemplate = "example-potatoes.csv" %}
      {% elif data.commodity == "plant products" %}
        {% set template = "template-plant-products.csv" %}
        {% set exampleTemplate = "example-plant-products.csv" %}
      {% elif data.commodity == "seeds" %}
        {% set template = "template-seeds.csv" %}
        {% set exampleTemplate = "example-seeds.csv" %}
      {% elif data.commodity == "used farm and forestry machinery" %}
        {% set template = "template-used-farm-machinery.csv" %}
        {% set exampleTemplate = "example-used-farm-machinery.csv" %}
      {% else %}
        {% set template = "template-plants.csv" %}
        {% set exampleTemplate = "example-plant.csv" %}
      {% endif %}

      <div class="govuk-form-group govuk-!-margin-bottom-9">

        <h1 class="govuk-heading-xl">Upload a file</h1>

        <p class="govuk-body"><a href="/public/templates/{{template}}" class="govuk-link govuk-link--no-visited-state" >Download the CSV template (3KB)</a></p>
        
        {% include "./upload-guidance-content-module.html" %}


        {{ govukFileUpload({
          id: "fileUpload1",
          name: "fileUpload1",
          label: {
            text: "Upload your completed CSV file"
          },
          errorMessage: {
            text: "Correct the problems with your file and then upload the file again"
          }
        }) }}

      </div>

      {{ govukButton({
        text: "Upload"
      }) }}

      {% if query.extras == "yes" %}
      <hr class="govuk-section-break govuk-section-break--xl govuk-section-break--visible">
      <h3 class="govuk-heading-s">Bulk upload templates</h3>
      <span class="govuk-body">Phytosanitary certificate</span>
      <ul class="govuk-list">
        <li><a href="/public/templates/template-bulbs.csv" class="govuk-link govuk-link-no-visited-state">Bulbs</a> | <a href="/public/templates/example-bulbs.csv" class="govuk-link govuk-link-no-visited-state">Example data</a></li>
        <li><a href="/public/templates/template-plants.csv" class="govuk-link govuk-link-no-visited-state">Plants and fresh produce</a> | <a href="/public/templates/example-plant.csv" class="govuk-link govuk-link-no-visited-state">Example data</a></li>
        <li><a href="/public/templates/template-potatoes.csv" class="govuk-link govuk-link-no-visited-state">Potatoes</a> | <a href="/public/templates/example-potatoes.csv" class="govuk-link govuk-link-no-visited-state">Example data</a></li>
        <li><a href="/public/templates/template-plant-products.csv" class="govuk-link govuk-link-no-visited-state">Processed plant products</a> | <a href="/public/templates/example-plant-products.csv" class="govuk-link govuk-link-no-visited-state">Example data</a></li>
        <li><a href="/public/templates/template-seeds.csv" class="govuk-link govuk-link-no-visited-state">Seeds for planting</a> | <a href="/public/templates/example-seeds.csv" class="govuk-link govuk-link-no-visited-state">Example data</a></li>
        <li><a href="/public/templates/template-grain.csv" class="govuk-link govuk-link-no-visited-state">Unprocessed cereal grains</a> | <a href="/public/templates/example-grain.csv" class="govuk-link govuk-link-no-visited-state">Example data</a></li>
        <li><a href="/public/templates/template-used-farm-machinery.csv" class="govuk-link govuk-link-no-visited-state">Used farm and forestry machinery</a> | <a href="/public/templates/example-used-farm-machinery.csv" class="govuk-link govuk-link-no-visited-state">Example data</a></li>
      </ul>
      <span class="govuk-body">Certificate of conformity</span>
      <ul class="govuk-list">
        <li><a href="/public/templates/template-sms.csv" class="govuk-link govuk-link-no-visited-state">SMS</a> | <a href="/public/templates/example-sms.csv" class="govuk-link govuk-link-no-visited-state">Example data</a></li>
        <li><a href="/public/templates/template-gms.csv" class="govuk-link govuk-link-no-visited-state">GMS</a> | <a href="/public/templates/example-gms.csv" class="govuk-link govuk-link-no-visited-state">Example data</a></li>       
      </ul>
      <span class="govuk-body">Seed sampling</span>
      <ul class="govuk-list">
        <li><a href="/public/templates/template-seeds-sampling.csv" class="govuk-link govuk-link-no-visited-state">Seed sampling</a> | <a href="/public/templates/example-seeds-sampling.csv" class="govuk-link govuk-link-no-visited-state">Example data</a></li>      
      </ul>
      <hr class="govuk-section-break govuk-section-break--xl govuk-section-break--visible">
      <h3 class="govuk-heading-s">Error handling</h3>
      <ul class="govuk-list">
        <li><a href="upload-validation-errors-summary" class="govuk-link govuk-link-no-visited-state">View error summary of unique errors (occurences and rows listed)</a></li>
      </ul>
      {% endif %}
    </form>

  </div>

</div>
{% endblock %}
