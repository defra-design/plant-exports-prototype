{% extends "layout.html" %}

{% block pageTitle %}
  Arrange a growing season inspection - Growing season inspection - {{serviceName}} - GOV.UK
{% endblock %}

{% block beforeContent %}
{{super()}}
{% include "../modules/_account-banner.html" %}
<a href="../../../dashboard-submitted" class="govuk-back-link">Return to your applications</a>
{% endblock %}

{% block content %}
{% if data.build == "development" %}
<style>

  /* Needs extracting and adding to the external Sass or CSS */
  .govuk-tag--grey {
    background-color: white;
    border: solid 1px #cbcbcb;
  }

</style>
{% endif %}

<div class="govuk-grid-row">

  <div class="govuk-grid-column-two-thirds">

    {% if query.cloned == "yes" %}
    <div class="app-alert app-alert--success" role="region" aria-labelledby="govuk-notification-banner-message" data-module="govuk-notification-banner">
      <p class="govuk-body" id="govuk-notification-banner-message">You have successfully copied this application</p>
    </div>
    {% endif %}

    {% if data.reference_num %}<span class="govuk-caption-xl">{{data.reference_num}}</span>{% endif %}
    <h1 class="govuk-heading-xl">Arrange a growing season inspection</h1>
    <p class="govuk-hint govuk-!-margin-bottom-7">Complete these details to arrange a growing season inspection</p>
    <ol class="app-task-list">
      <li>
        <h2 class="app-task-list__section"><span class="app-task-list__section-number">1. </span> Application details</h2>
        <ul class="app-task-list__items">
          <li class="app-task-list__item">
            <span class="app-task-list__task-name"><a href="../create/reference?return_url=task-list&change=yes" aria-describedby="create_a_reference">Create a reference</a></span>
            <strong class="govuk-tag app-task-list__tag" id="create_a_reference">Complete</strong>
          </li>
          <li class="app-task-list__item">
            <span class="app-task-list__task-name"><a href="inspection-addresses" aria-describedby="inspection_details">What are the inspection details?</a></span>
            {% if data.inspection_task_list_data %}
            <strong class="govuk-tag app-task-list__tag" id="inspection_details">Complete</strong>
            {% else %}
            <strong class="govuk-tag govuk-tag--grey app-task-list__tag" id="inspection_details">Not started</strong>
            {% endif %}
          </li>
          <li class="app-task-list__item">
            {% if data.commodity_task_list_data %}
            <span class="app-task-list__task-name"><a href="{{data.commodity_task_list_data or 'field'}}" aria-describedby="fields_and_commodities">Where is the crop?</a></span>
            <strong class="govuk-tag app-task-list__tag" id="fields_and_commodities">Complete</strong>
            {% else %}
            <span class="app-task-list__task-name"><a href="field" aria-describedby="fields_and_commodities">Where is the crop?</a></span>
            <strong class="govuk-tag govuk-tag--grey app-task-list__tag" id="fields_and_commodities">Not started</strong>
            {% endif %}
          </li>
        </ul>
      </li>
      <li>
        <h2 class="app-task-list__section"><span class="app-task-list__section-number">2. </span> Check and submit your application</h2>
        <ul class="app-task-list__items">
          <li class="app-task-list__item">
            <span class="task-list-submit-disabled">
              <span class="app-task-list__task-name">Check your answers and submit your application</span>
              <strong class="govuk-tag govuk-tag--grey app-task-list__tag">Cannot start yet</strong>
            </span>
            <span class="task-list-submit-enabled" style="display: none;">
              <span class="app-task-list__task-name"><a href="check-your-answers">Check your answers and submit your application</a></span>
             <!-- <strong class="govuk-tag govuk-tag--grey app-task-list__tag">Not started</strong> -->
            </span>
          </li>
        </ul>
      </li>
    </ol>
    
    {% block continueLater %}
    {% include "../modules/_save-continue-later.html" %}
    {% endblock %}
  </div>

</div>
{% endblock %}

{% block scripts %}
{{super()}}
<script type="text/javascript">

  /* window.addEventListener('load', function() {
    var tasks = $('.app-task-list__tag')
    var max = tasks.length - 2
    $('.task-list-max').text(max)
    var count = 0
    tasks.each(function(index, value) {
      console.log($(value).text())
      
      if ($(value).text() == "Completed") {
        count += 1
      }

    })
    
    if (count >= max-1) {
      $('.task-list-submit-enabled').show()
      $('.task-list-submit-disabled').hide()
    }
    
    $('.task-list-completed').text(count)
  }) */

  $('.task-list-submit-enabled').show()
  $('.task-list-submit-disabled').hide()

</script>
{% endblock %}
